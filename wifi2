Project Structure
wifi-app/
â”‚â”€â”€ wifi.pro
â”‚â”€â”€ main.cpp
â”‚â”€â”€ WifiManager.h
â”‚â”€â”€ WifiManager.cpp
â”‚â”€â”€ qml/
    â”‚â”€â”€ main.qml

ðŸ“„ wifi.pro
QT += quick qml

CONFIG += c++11

SOURCES += main.cpp \
           WifiManager.cpp

HEADERS += WifiManager.h

RESOURCES += qml.qrc

ðŸ“„ qml.qrc
<RCC>
    <qresource prefix="/">
        <file>qml/main.qml</file>
    </qresource>
</RCC>

ðŸ“„ WifiManager.h
#ifndef WIFIMANAGER_H
#define WIFIMANAGER_H

#include <QObject>
#include <QStringList>
#include <QProcess>

class WifiManager : public QObject
{
    Q_OBJECT
    Q_PROPERTY(bool wifiOn READ wifiOn NOTIFY wifiOnChanged)
    Q_PROPERTY(QStringList wifiList READ wifiList NOTIFY wifiListChanged)
    Q_PROPERTY(bool connected READ connected NOTIFY connectedChanged)
    Q_PROPERTY(QString ipv4 READ ipv4 NOTIFY ipv4Changed)

public:
    explicit WifiManager(QObject *parent = nullptr);

    bool wifiOn() const { return m_wifiOn; }
    QStringList wifiList() const { return m_wifiList; }
    bool connected() const { return m_connected; }
    QString ipv4() const { return m_ipv4; }

    Q_INVOKABLE void toggleWifi();
    Q_INVOKABLE void scanWifi();
    Q_INVOKABLE void connectToWifi(QString ssid, QString password);

private:
    bool m_wifiOn;
    QStringList m_wifiList;
    bool m_connected;
    QString m_ipv4;

    void updateStatus();

signals:
    void wifiOnChanged();
    void wifiListChanged();
    void connectedChanged();
    void ipv4Changed();
};

#endif // WIFIMANAGER_H

ðŸ“„ WifiManager.cpp
#include "WifiManager.h"
#include <QDebug>

WifiManager::WifiManager(QObject *parent)
    : QObject(parent),
      m_wifiOn(false),
      m_connected(false)
{
    updateStatus();
}

void WifiManager::toggleWifi()
{
    m_wifiOn = !m_wifiOn;

    QProcess::execute(m_wifiOn ? "nmcli radio wifi on"
                               : "nmcli radio wifi off");

    emit wifiOnChanged();
    updateStatus();
}

void WifiManager::scanWifi()
{
    m_wifiList.clear();

    QProcess scan;
    scan.start("nmcli -t -f SSID dev wifi list");
    scan.waitForFinished();

    QString out = scan.readAll();
    QStringList lines = out.split("\n", Qt::SkipEmptyParts);

    for (QString s : lines)
        if (!s.trimmed().isEmpty())
            m_wifiList.append(s.trimmed());

    emit wifiListChanged();
}

void WifiManager::connectToWifi(QString ssid, QString password)
{
    QString cmd = QString("nmcli dev wifi connect \"%1\" password \"%2\"")
                      .arg(ssid, password);

    QProcess::execute(cmd);

    updateStatus();
}

void WifiManager::updateStatus()
{
    // Check connection state
    QProcess p;
    p.start("nmcli -t -f WIFI g");
    p.waitForFinished();
    m_wifiOn = p.readAll().trimmed() == "enabled";
    emit wifiOnChanged();

    // Check active connection
    QProcess con;
    con.start("nmcli -t -f DEVICE,STATE,IP4 dev");
    con.waitForFinished();

    QString out = con.readAll();

    m_connected = out.contains("connected");
    emit connectedChanged();

    // Extract IPv4
    m_ipv4 = "";
    QStringList lines = out.split("\n");
    for (QString l : lines) {
        if (l.contains("connected") && l.contains(":")) {
            QStringList f = l.split(":");
            if (f.size() >= 3)
                m_ipv4 = f.at(2);
        }
    }
    emit ipv4Changed();
}

ðŸ“„ main.cpp
#include <QGuiApplication>
#include <QQmlApplicationEngine>
#include "WifiManager.h"

int main(int argc, char *argv[])
{
    QGuiApplication app(argc, argv);

    qmlRegisterType<WifiManager>("Backend", 1, 0, "WifiManager");

    QQmlApplicationEngine engine;
    engine.load(QUrl(QStringLiteral("qrc:/qml/main.qml")));

    return app.exec();
}

ðŸ“„ qml/main.qml

import QtQuick 2.15
import QtQuick.Controls 2.15
import QtQuick.Layouts 1.15

Rectangle {
    width: 480
    height: 700
    color: "#f0f2f5"

    // C++ WifiManager available as context property registered in main.cpp
    WifiManager {
        id: wifi
    }

    Column {
        anchors.centerIn: parent
        spacing: 20

        Text {
            text: "WiFi Manager"
            font.pixelSize: 32
            font.bold: true
            color: "#222"
            horizontalAlignment: Text.AlignHCenter
        }

        Button {
            text: wifi.wifiOn ? "Turn WiFi OFF" : "Turn WiFi ON"
            width: 200
            onClicked: wifi.toggleWifi()
        }

        Row {
            spacing: 10
            visible: wifi.wifiOn

            Rectangle {
                width: 18; height: 18; radius: 9
                color: wifi.connected ? "green" : "red"
            }

            Text {
                text: wifi.connected ? "Connected" : "Disconnected"
                font.pixelSize: 18
            }
        }

        Text {
            visible: wifi.wifiOn && wifi.connected
            text: "IPv4: " + wifi.ipv4
            color: "#444"
            font.pixelSize: 18
        }

        Button {
            width: 200
            text: "Show WiFi List"
            visible: wifi.wifiOn
            onClicked: wifi.scanWifi()
        }

        ListView {
            width: 350
            height: 250
            visible: wifi.wifiOn && wifi.wifiList.length > 0
            model: wifi.wifiList

            delegate: Rectangle {
                width: parent.width
                height: 40
                color: "white"
                radius: 6
                border.color: "#ccc"

                Text {
                    anchors.verticalCenter: parent.verticalCenter
                    anchors.left: parent.left
                    anchors.leftMargin: 10
                    text: modelData
                    font.pixelSize: 18
                }

                MouseArea {
                    anchors.fill: parent
                    onClicked: {
                        ssidText.text = modelData
                        passwordPopup.open()
                    }
                }
            }
        }
    }

    Popup {
        id: passwordPopup
        modal: true
        width: 300
        height: 200
        background: Rectangle {
            color: "white"
            radius: 10
        }

        Column {
            anchors.centerIn: parent
            spacing: 10

            Text {
                text: "Enter Password"
                font.pixelSize: 22
            }

            Text {
                id: ssidText
                font.pixelSize: 18
                color: "#666"
            }

            TextField {
                id: passField
                placeholderText: "Password"
                echoMode: TextInput.Password
                width: 200
            }

            Button {
                text: "Connect"
                width: 150
                onClicked: {
                    wifi.connectToWifi(ssidText.text, passField.text)
                    passwordPopup.close()
                }
            }
        }
    }
}
